HmMMMMMMMAJAX Notes (JavaScript)
1️⃣ What is AJAX?

AJAX = Asynchronous JavaScript And XML

Allows you to send/receive data from a server without reloading the page.

Modern APIs usually use JSON instead of XML.

Works asynchronously, so JS continues running while waiting for server response.

2️⃣ XMLHttpRequest (XHR)
Creating a request
const xhr = new XMLHttpRequest();

Open a connection
xhr.open(method, url, async);

method: "GET" or "POST"

url: API endpoint

async: true for asynchronous (usually true)

Send the request
xhr.send(params); // params only for POST requests

Set request headers
xhr.setRequestHeader('Content-type', 'application/json; charset=UTF-8');

Handle response
xhr.onload = function() {
    if(this.status >= 200 && this.status < 300){
        console.log(JSON.parse(this.responseText));
    } else {
        console.log('Error:', this.status);
    }
}


this.status = HTTP response status
this.responseText = response body

Optional: Track progress
xhr.onprogress = function() {
    console.log('Download in progress...');
}

xhr.upload.onprogress = function(event) {
    console.log(`Sent ${event.loaded} of ${event.total} bytes`);
}

Optional: Track readyState
xhr.onreadystatechange = function() {
    console.log('readyState:', xhr.readyState);
}


readyState values:
| Value | Meaning |
|-------|--------|
| 0 | UNSENT |
| 1 | OPENED |
| 2 | HEADERS_RECEIVED |
| 3 | LOADING |
| 4 | DONE |


3️⃣ GET Request Example
const xhr = new XMLHttpRequest();
xhr.open('GET', 'https://jsonplaceholder.typicode.com/todos/1', true);

xhr.onload = function() {
    if(this.status === 200){
        const data = JSON.parse(this.responseText);
        console.log(data);
    }
}

xhr.send();

4️⃣ POST Request Example
const xhr = new XMLHttpRequest();
xhr.open('POST', 'https://jsonplaceholder.typicode.com/posts', true);
xhr.setRequestHeader('Content-type','application/json; charset=UTF-8');

const params = JSON.stringify({
    userId: 1,
    title: "My Title",
    body: "My content"
});

xhr.onload = function() {
    if(this.status >= 200 && this.status < 300){
        console.log(JSON.parse(this.responseText));
    } else {
        console.log('Error:', this.status);
    }
}

xhr.send(params);

5️⃣ Common Issues

this.responseText undefined → Arrow functions don’t bind this, use normal function.

429 Too Many Requests → API rate limit exceeded.

JSON data not appearing → Check API response structure, often nested like obj.data.

6️⃣ Notes / Tips

Always console.log(obj) to check JSON structure before looping.

Use obj.data.forEach() or for…of for arrays instead of for…in.

JSONPlaceholder is a fake API → data isn’t permanently stored.

For real storage, use a backend + database.

7️⃣ Modern Alternative: Fetch API

Instead of XHR:

fetch('https://jsonplaceholder.typicode.com/posts', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ userId: 1, title: "Hello", body: "World" })
})
.then(res => res.json())
.then(data => console.log(data))
.catch(err => console.log(err));


Cleaner, uses Promises, avoids this confusion.

Can also use async/await:

const postData = async () => {
    const res = await fetch('https://jsonplaceholder.typicode.com/posts', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ userId: 1, title: "Hello", body: "World" })
    });
    const data = await res.json();
    console.log(data);
}